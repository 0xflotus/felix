@import config

@head(1,'Judy source package')
@select(tangler('spkgs/flx_judy.py'))
import os
import glob

import config

iscr_source = ['lpsrc/flx_judy.pak']
weaver_directory = 'doc/judy'

xfiles = [
  os.path.join('src', 'judy', '*'),
  os.path.join('src', 'judy', 'Judy1', '*'),
  os.path.join('src', 'judy', 'JudyCommon', '*'),
  os.path.join('src', 'judy', 'JudyHS', '*'),
  os.path.join('src', 'judy', 'JudyL', '*'),
  os.path.join('src', 'judy', 'JudySL', '*'),
]

rtl_interfaces = [
  'src/judy/Judy.h'
]

felix_rtl = [
  'src/judy/judy.flx',
]

cc_ccs = [
  'src/judy/JudyCommon/JudyMalloc',
  'src/judy/Judy1/JUDY1_Judy1ByCount',
  'src/judy/Judy1/JUDY1_Judy1Cascade',
  'src/judy/Judy1/JUDY1_Judy1Count',
  'src/judy/Judy1/JUDY1_Judy1CreateBranch',
  'src/judy/Judy1/JUDY1_Judy1Decascade',
  'src/judy/Judy1/JUDY1_Judy1First',
  'src/judy/Judy1/JUDY1_Judy1FreeArray',
  'src/judy/Judy1/JUDY1_Judy1InsertBranch',
  'src/judy/Judy1/JUDY1_Judy1MallocIF',
  'src/judy/Judy1/JUDY1_Judy1MemActive',
  'src/judy/Judy1/JUDY1_Judy1MemUsed',
  'src/judy/Judy1/JUDY1_Judy1SetArray',
  'src/judy/Judy1/JUDY1_Judy1Set',
  'src/judy/Judy1/JUDY1_Judy1Tables',
  'src/judy/Judy1/JUDY1_Judy1Unset',
  'src/judy/Judy1/JUDY1_Judy1Next',
  'src/judy/Judy1/JUDY1_Judy1NextEmpty',
  'src/judy/Judy1/JUDY1_Judy1Prev',
  'src/judy/Judy1/JUDY1_Judy1PrevEmpty',
  'src/judy/Judy1/JUDY1_Judy1Test',
  'src/judy/Judy1/JUDY1_j__udy1Test',
  'src/judy/JudyL/JUDYL_JudyLByCount',
  'src/judy/JudyL/JUDYL_JudyLCascade',
  'src/judy/JudyL/JUDYL_JudyLCount',
  'src/judy/JudyL/JUDYL_JudyLCreateBranch',
  'src/judy/JudyL/JUDYL_JudyLDecascade',
  'src/judy/JudyL/JUDYL_JudyLDel',
  'src/judy/JudyL/JUDYL_JudyLFirst',
  'src/judy/JudyL/JUDYL_JudyLFreeArray',
  'src/judy/JudyL/JUDYL_JudyLInsArray',
  'src/judy/JudyL/JUDYL_JudyLIns',
  'src/judy/JudyL/JUDYL_JudyLInsertBranch',
  'src/judy/JudyL/JUDYL_JudyLMemActive',
  'src/judy/JudyL/JUDYL_JudyLMemUsed',
  'src/judy/JudyL/JUDYL_JudyLMallocIF',
  'src/judy/JudyL/JUDYL_JudyLTables',
  'src/judy/JudyL/JUDYL_JudyLNext',
  'src/judy/JudyL/JUDYL_JudyLNextEmpty',
  'src/judy/JudyL/JUDYL_JudyLPrev',
  'src/judy/JudyL/JUDYL_JudyLPrevEmpty',
  'src/judy/JudyL/JUDYL_JudyLGet',
  'src/judy/JudyL/JUDYL_j__udyLGet',
  'src/judy/JudyHS/JudyHS',
]

include_path=['src/judy/Judy1', 'src/judy/JudyL', 'src/judy/JudyCommon', 'src/judy']

if config.TARGET_CC.options.SIZEOF_VOIDP == 8:
  macros=['JU_64BIT']
else:
  macros=['JU_32BIT']

build_macro = 'JUDY'

provides_lib = 'libflx_judy'

root = config.FLX_DIR
unit_tests = [('test', 'judy', 'judy-*.flx')]

@head(1,'Judy run time library')
@select(tangler('config/flx_judy.fpc'))
@if config.HAVE_MSVC:
   tangle("provides_dlib: /DEFAULTLIB:libflx_judy_dynamic")
   tangle("provides_slib: /DEFAULTLIB:libflx_judy_static")
 else:
   tangle("provides_dlib: -lflx_judy_dynamic")
   tangle("provides_slib: -lflx_judy_static")
