
@h1 xml2-1-0.flx
@felix
include "xml/xml2";

open XML2;

var data_path=Env::getenv "TEST_DATA_DIR";
val in_doc1  = data_path+"/test1.xhtml";

println("----------Test xml2-1-0-----------------");
println("---xml_parse_file xml_doc_dump----------");
var xml_doc1 = xml_parse_file(in_doc1); // parse file
println("----------------------------------------");
/* Use this if you want to write to a file
val out_doc1 = "./test_out1.xhtml";
val result1 = xml_doc_dump(out_doc1,xml_doc1);
if (result1 > 0) do
   println("Wrote: "+out_doc1+" length:"+str(result1));
else
   println("Failed writing:"+out_doc1+" With:"+str(result1));
done*/ 
print(xml_doc_dump(xml_doc1));
println("----------------------------------------");
xml_free_doc(xml_doc1);

@expect
----------Test xml2-1-0-----------------
---xml_parse_file xml_doc_dump----------
----------------------------------------
<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 <title>XHTML 1.0 Strict Example</title>
 <script type="text/javascript">
 //<![CDATA[
 function loadpdf() {
    document.getElementById("pdf-object").src="http://www.w3.org/TR/xhtml1/xhtml1.pdf";
 }
 //]]>
 </script>
 </head>
 <body onload="loadpdf()">
 <p>This is an example of an
 <abbr title="Extensible HyperText Markup Language">XHTML</abbr> 1.0 Strict document.<br />
 <img id="validation-icon" src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0 Strict" /><br />
 <object id="pdf-object" name="pdf-object" type="application/pdf" data="http://www.w3.org/TR/xhtml1/xhtml1.pdf" width="100%" height="500">
 </object>
 </p>
 </body>
</html>
----------------------------------------
@
