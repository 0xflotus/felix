include "web/web_server";

open Cookie;
open HTTPRequest;
open LowResTime;


println("""
cookie-1-0
----------------
Cookie Creation:
""");
var vo:cookie;
vo.name="UserId";
vo.value="sombody";
vo.domain="127.0.0.1";
vo.path="/";
vo.http_only = true;
println("Manually:"+str(vo));
var v = cookie("x","v");

v.expires = "Mon, 16 Jan 2012 14:20:07 GMT";
println("Via constructor:"+str(v));
println("\nSetting a cookie for HTTP");
val vo1 = set_cookie(vo);
val v1 = set_cookies(list(vo,v));
println(map (fun (x:char) => if x == char("\r") then char(" ") else x endif) vo1.(0)+":"+vo1.(1));
println("\nSetting multiple cookies for HTTP");
println(map (fun (x:char) => if x == char("\r")  then char(" ") else x endif) (v1.(0)+":"+v1.(1)));